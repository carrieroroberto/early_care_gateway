@startuml

interface IReportRepository {
  + save(report: Report) : Report
  + findByDoctor(doctorId) : list<Report>
  + findByDoctorAndPatient(doctorId, patientCf) : list<Report>
}
class ReportRepositoryImpl implements IReportRepository {
  - dbConnection
  + save(report: Report) : Report
  + findByDoctor(doctorId) : list<Report>
  + findByDoctorAndPatient(doctorId, patientCf) : list<Report>
}

interface IAuditNotifier {
  + notify(eventType: String, details: Map)
}
class AuditClient implements IAuditNotifier {
  - httpClient
  + notify(eventType: String, details: Map)
}

interface IProcessedDataClient {
  + getProcessedData(dataId: String) : ProcessedData
}

interface IAnalysisStrategy {
  + execute(data: ProcessedData) : Report
}
class TextStrategy implements IAnalysisStrategy {
  + execute(data: ProcessedData) : Report
}
class ImageStrategy implements IAnalysisStrategy {
  + execute(data: ProcessedData) : Report
}
class NumericStrategy implements IAnalysisStrategy {
  + execute(data: ProcessedData) : Report
}
class SignalStrategy implements IAnalysisStrategy {
  + execute(data: ProcessedData) : Report
}

class ExplainableAIService {
  - reportRepo: IReportRepository
  - auditNotifier: IAuditNotifier
  - dataClient: IProcessedDataClient

  + performAnalysis(dataId: String, strategy: String) : DiagnosisReport
  + getReports(doctorId: String, patientId: String) : list<ReportSummary>
}

ExplainableAIService o-- "1" IReportRepository
ExplainableAIService o-- "1" IAuditNotifier
ExplainableAIService o-- "1" IProcessedDataClient
ExplainableAIService ..> IAnalysisStrategy : uses

@enduml